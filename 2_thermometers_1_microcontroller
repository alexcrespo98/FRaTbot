// Dual Tasseron TSD thermistor reader (10 kΩ NTC assumed)
// Arduino Nano, analog inputs A0 & A1

const int sensorPin1 = A0;     // Thermistor 1
const int sensorPin2 = A1;     // Thermistor 2
const float seriesResistor = 10000.0; // 10k reference resistor (ohms)
const float nominalResistance = 10000.0; // resistance at 25°C (ohms)
const float nominalTemp = 25.0;         // nominal temperature (°C)
const float betaCoefficient = 3950.0;   // Beta constant for common 10k NTC
const int adcMax = 1023;                // 10-bit ADC on Nano

float readThermistor(int pin) {
  int adcValue = analogRead(pin);
  float voltage = adcValue * 5.0 / adcMax;
  float resistance = seriesResistor * (5.0 / voltage - 1.0);

  // Steinhart-Hart (Beta approximation)
  float steinhart = resistance / nominalResistance;
  steinhart = log(steinhart);
  steinhart /= betaCoefficient;
  steinhart += 1.0 / (nominalTemp + 273.15);
  steinhart = 1.0 / steinhart;
  steinhart -= 273.15;
  return steinhart;
}

void setup() {
  Serial.begin(9600);
  delay(500); // Give serial time to initialize

  // Send readiness and sensor mode info to TX (Serial)
  Serial.println("DataBuddy Ready: Dual Thermistor Mode (A0, A1)");
}

void loop() {
  float temp1 = readThermistor(sensorPin1);
  float temp2 = readThermistor(sensorPin2);

  // Send data in a format easy for DataBuddy to parse
  Serial.print("T1=");
  Serial.print(temp1, 2); // 2 decimal places
  Serial.print("C, T2=");
  Serial.print(temp2, 2);
  Serial.println("C");

  delay(100);
}
